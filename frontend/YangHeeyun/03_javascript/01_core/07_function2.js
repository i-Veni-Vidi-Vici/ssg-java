/*
í•¨ìˆ˜ì˜ ì—¬ëŸ¬ê°€ì§€ í˜•íƒœ
1. ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜
2. ìž¬ê·€í•¨ìˆ˜
3. ì¤‘ì²©í•¨ìˆ˜
4. ì½œë°±í•¨ìˆ˜
5. ìˆœìˆ˜í•¨ìˆ˜
6. í´ë¡œì ¸í•¨ìˆ˜
*/

/*
1. ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜(IIFE)
    Immediately Invoke Function Expression
    - ì„ ì–¸ê³¼ ì‹¤í–‰ì„ ë™ì‹œì— ìž‘ì„±í•˜ëŠ” í•¨ìˆ˜
    - 1íšŒìš© (ìž¬ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤)
*/

// (() => {
//     console.log("ðŸ¥—");
// })ì—¬ê¸°ê¹Œì§€ ì„ ì–¸ë¶€ (); ì—¬ê¸°ë§Œ ì‹¤í–‰ë¶€

(() => {
    console.log("ðŸ¥—");
})();

((food) => {
    console.log(food);
})('ðŸ–');



// ì „ì—­ ìŠ¤ì½”í”„
let salad = "ðŸ¥—";
salad = "ðŸ”"; // ì „ì—­ ìŠ¤ì½”í”„ëŠ” ì‰½ê²Œ ìž¬ì„¤ì •ì´ ê°€ëŠ¥í•œ ìž¥ì  ê²¸ ë‹¨ì ì´ ìžˆë‹¤.
console.log(salad); 

(() => {
    // ì§€ì—­ ìŠ¤ì½”í”„
    // ì§€ì—­ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³ , ê°’ì„ ë³´í˜¸í•˜ê¸° ìœ„í•´ì„œ IIFE ì‚¬ìš©í•œë‹¤.
    let salad = "ðŸ¥—";
    console.log(salad);
})();

(() => {
    // ì§€ì—­ ìŠ¤ì½”í”„
    // ì§€ì—­ìŠ¤ì½”í”„ì˜ ê²½ìš°, ë™ì¼í•œ ì´ë¦„ì˜ ë³€ìˆ˜ë¥¼ ë‹¤ë¥¸ ìŠ¤ì½”í”„ì— ì„ ì–¸í•´ ì“°ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. 
    let salad = "ðŸ¥—";
    console.log(salad);
})();

/*
2. ìž¬ê·€í˜¸ì¶œí•¨ìˆ˜
- í•¨ìˆ˜ ì•ˆì—ì„œ í•¨ìˆ˜ ìžì‹ ì„ ë‹¤ì‹œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°
- ì¢…ë£Œì¡°ê±´ì„ ë°˜ë“œì‹œ ëª…ì‹œí•´ì•¼ í•œë‹¤. (stackover flow ì˜¤ë¥˜ê°€ ë°œìƒí• ìˆ˜ ìžˆì–´ ì£¼ì˜)
- ë°˜ë³µì²˜ë¦¬ ë³´ë‹¤ ë” ê°„ë‹¨ížˆ ì²˜ë¦¬ê°€ëŠ¥í•œ ê²½ìš° ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤. (í•˜ë…¸ì´ íƒ‘)
*/

// n! (factorial) = 1 * 2 * 3 * ... * n
// 5! = 5 * 4 * 3 * 2 * 1
const factorial = (n) => {
    if(n==1) return 1; // ì¢…ë£Œì¡°ê±´ 
    return n * factorial(n-1);
};
console.log(factorial(5)); // 120

/*
3. ì¤‘ì²©í•¨ìˆ˜
- í•¨ìˆ˜ë‚´ë¶€ì— í•¨ìˆ˜ë¥¼ ì„ ì–¸í•´ ì‚¬ìš©
- ë‚´ë¶€í•¨ìˆ˜ë¥¼ êµ³ì´ ë…¸ì¶œí•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš° ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.
*/
// 10 -> 10, 3 -> 03
const outer = (n) => {
    const inner = (k) => k < 10 ? '0' + k : k;
    console.log(inner(n));
};
outer(15); // 15
outer(7); // 07

/*
4. ì½œë°±í•¨ìˆ˜ Callback
- jsì˜ í•¨ìˆ˜ëŠ” ì¼ê¸‰ê°ì²´(ê°’)ìœ¼ë¡œì¨ ë§¤ê°œì¸ìžë¡œ ì „ë‹¬í•  ìˆ˜ ìžˆê³ , ì´ë¥¼ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìžˆë‹¤.
*/
const a = (f) => {
    f();
};

const b = () => console.log('ðŸ³');
b()

a(b); // f=bê°€ ë˜ë¯€ë¡œ f() -> b();

/*
5. ìˆœìˆ˜/ë¹„ìˆœìˆ˜ í•¨ìˆ˜
ëª¨ë“  í•¨ìˆ˜ì—ëŠ” ìž…ë ¥/ì¶œë ¥ì´ ìžˆë‹¤.
í•¨ìˆ˜ì—ëŠ” ë¶€ìž…ë ¥/ë¶€ì¶œë ¥ì´ ìžˆì„ ìˆ˜ ìžˆë‹¤.
(ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•œ ë§¤ê°œì¸ìž/ë¦¬í„´ê°’ ì™¸ì— ì™¸ë¶€ìŠ¤ì½”í”„ì˜ ê°’ì„ ìž…ë ¥/ì¶œë ¥ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.)
 
ìˆœìˆ˜í•¨ìˆ˜ : ì™¸ë¶€ìƒíƒœì— ì˜ì¡´/ë³€ê²½í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜(ê°’ì„ ë°›ì•„ ì½ê±°ë‚˜ ë°”ê¾¸ê±°ë‚˜ ì•ˆí•¨)
ë¹„ìˆœìˆ˜í•¨ìˆ˜ : ì™¸ë¶€ì‚¬ì• ì— ì˜ì¡´/ë³€ê²½í•˜ëŠ” í•¨ìˆ˜

ë˜ë„ë¡ ìˆœìˆ˜í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ë©´ ì¢‹ë‹¤(ë¶€ìˆ˜ì  ìž…ì¶œë ¥ì„ ì—†ì• ì„œ ë¶€ìž‘ìš©ì„ ì—†ì•°)
ìˆœìˆ˜í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ë¶ˆë³€ì„±ì„ ì¶”êµ¬í•˜ëŠ” í”„ë¡œê·¸ëž˜ë° ë°©ì‹ì´ í•¨ìˆ˜í˜• í”„ë¡œê·¸ëž˜ë°ì´ë‹¤.
*/
const pureFunc = (n) => { // ìž…ë ¥ë°›ê³  ì¶œë ¥ë§Œ í•˜ëŠ” ìˆœìˆ˜í•¨ìˆ˜
    return ++n;
}
console.log(pureFunc(1));


let count = 0;
const impureFunc = (n) => { // ë¹„ìˆœìˆ˜í•¨ìˆ˜
    count = count + 1;
    return ++n;
};
console.log(impureFunc(1));

/*
6. Closureí•¨ìˆ˜
ìžìœ ë³€ìˆ˜ free variable : í•¨ìˆ˜ ì§€ì—­ë²”ìœ„ì—ì„œ ì„ ì–¸ë˜ì§€ ì•Šì€ ë³€ìˆ˜
ëª¨ë“  ìžìœ ë³€ìˆ˜ê°€ ì „ì—­ë³€ìˆ˜ì¸ ê²ƒì€ ì•„ë‹ˆë‹¤.

í´ë¡œì ¸í•¨ìˆ˜ëž€? ìžìœ ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ì™¸ë¶€ë¡œë¶€í„° ë‹«ížŒ í•¨ìˆ˜. 
- í´ë¡œì ¸ê°€ ê°€ì§„ ìžìœ ë³€ìˆ˜ëŠ” ì™¸ë¶€ë¡œë¶œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ê³ , ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìžˆë‹¤.
- ì´ë¯¸ ëª¨ë“  ê²ƒì„ ê°€ì§€ê³  ìžˆì–´ì„œ ì™¸ë¶€ì—ì„œ ëŒì–´ë‹¤ ê°€ì ¸ì˜¤ì§€ ì•ŠìŒ

*/

const word = "ì•ˆë…•";

// wordëŠ” greetingì˜ ìžìœ ë³€ìˆ˜ì´ë‹¤.
const greeting = (name) => {
    const word2 = "ë°˜ê°€ì›Œ";
    console.log(`${word}, ${name}. ${word2}`);
};
greeting('ê¸¸ë™');

function yoo(){
    const num = 100;
    return () => console.log(`num = ${num}`);
  }
const num = 200;
const too = yoo(); // closureí•¨ìˆ˜. ìžìœ ë³€ìˆ˜ num(100)ì„ ê°€ì§€ê³  ì™¸ë¶€ë¡œë¶€í„° ë‹«ížŒ í•¨ìˆ˜. ë¦¬í„´í•¨ìˆ˜ + ìžìœ ë³€ìˆ˜ num = 100ê¹Œì§€ tooì— ë„£ì–´ì¤Œ
//   const too = () => console.log(`num = ${num}`);
console.log(too);
too(); // 100

let cnt = 0;
const globalCounter = () => console.log(++cnt);
globalCounter();
globalCounter();
globalCounter();

cnt = 100; // ê°’ ìž¬ì„¤ì •(ê°’ ì˜¤ì—¼)
globalCounter();
globalCounter();
globalCounter();


// cntë¥¼ closireCounterMakerì—ì„œ ìž¬ì •ì˜í•˜ë”ë¼ë„ ì•ˆì— í•¨ìˆ˜ cnt = 0ì€ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤
// ì ‘ê·¼ì œí•œìžê°€ ì—†ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìš°íšŒì ìœ¼ë¡œ ë³€ìˆ˜ë¥¼ ë³´í˜¸í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì´ closureë‹¤.
const closureCounterMaker = () => {
    let cnt = 0;
    return () => console.log(++cnt);
};
const closureCounter = closureCounterMaker();
closureCounter();
closureCounter();
closureCounter();