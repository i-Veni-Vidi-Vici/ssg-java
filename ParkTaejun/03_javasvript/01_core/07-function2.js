/**
 * í•¨ìˆ˜ì˜ ì—¬ëŸ¬ê°€ì§€ í˜•íƒœ
 * 1. ì¦‰ì‹œ ì‹¤í–‰í•¨ìˆ˜
 * 2. ì¬êµ¬í•¨ìˆ˜
 * 3. ì¤‘ì²©í•¨ìˆ˜
 * 4. ì½œë°±í•¨ìˆ˜
 * 5. ìˆœìˆ˜í•¨ìˆ˜
 * 6. í´ë¡œì ¸í•¨ìˆ˜
 */

/**
 * 1. ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜(IIFE)
 *  - Immediately Invoked Function Expression 
 *  - ì„ ì–¸ê³¼ ì‹¤í–‰ì„ ë™ì‹œì— ì‘ì„±í•˜ëŠ” í•¨ìˆ˜
 *  - 1íšŒìš© (ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.)
 */

(() => {
    console.log("ğŸ”¢ğŸ”¢");
})();

((food) => {
    console.log(food);
})('ğŸ“•ğŸ“•ğŸ“•');

// ì „ì—­ìŠ¤ì½”í”„
let salad = 'ğŸ¥—'
console.log(salad);

(() => {
    //ì§€ì—­ìŠ¤ì½”í”„
    //ì§€ì—­ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³ , ê°’ì„ ë³´í˜¸í•˜ê¸° ìœ„í•´ì„œ IIFEë¥¼ ì‚¬ìš©í•œë‹¤.
    let salad = 'ğŸ¥—'
console.log(salad);
})();

(() => { // ì„œë¡œ ë‹¤ë¥¸ ì§€ì—­ìŠ¤ì½”í”„ê¸° ë•Œë¬¸ì— ì—°ì†ìœ¼ë¡œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
    //ì§€ì—­ìŠ¤ì½”í”„
    //ì§€ì—­ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³ , ê°’ì„ ë³´í˜¸í•˜ê¸° ìœ„í•´ì„œ IIFEë¥¼ ì‚¬ìš©í•œë‹¤.
    let salad = 'ğŸ¥—'
console.log(salad);
})();

/**
 *  2. ì¬ê·€í˜¸ì¶œí•¨ìˆ˜
 *  - í•¨ìˆ˜ ì•ˆì—ì„œ í•¨ìˆ˜ ìì‹ ì„ ë‹¤ì‹œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°
 *  - ì¢…ë£Œì¡°ê±´ì„ ë°˜ë“œì‹œ ëª…ì‹œí•´ì•¼ í•œë‹¤. (stackover flow ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ ì£¼ì˜í•´ì•¼í•œë‹¤.)
 *  - ë°˜ë³µì²˜ë¦¬ ë³´ë‹¤ ë” ê°„ë‹¨íˆ ì²˜ë¦¬ ê°€ëŠ¥í•œ ê²½ìš° ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤. (í•˜ë…¸ì´íƒ‘)
 */

// n!(factorial) = 1* 2* 3 * 4 * 5...* n
// 5! = ~ *5

const factoral = (n) => {
    if (n == 1) return 1; // ì¢…ë£Œ ì¡°ê±´ ë§Œì•½ nì´ 1 ì´ë¼ë©´ ê·¸ëƒ¥ 1 ë°˜í™˜í•´ë¼
    return n * factoral(n - 1);
};
console.log(factoral(5));

/**
 * 3. ì¤‘ì²©í•¨ìˆ˜
 * - í•¨ìˆ˜ë‚´ë¶€ì— í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ì—¬ ì‚¬ìš©
 * - ë‚´ë¶€í•¨ìˆ˜ë¥¼ êµ³ì´ ë…¸ì¶œí•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
 */

// 10 -> 10, 3 -> 03
const outer = (n) => {
    const inner = (k) => k < 10 ? '0' + k : k
    console.log(inner(n));
};

outer(15); // 15
outer(7); // 07

/**
 * 4. ì½œë°±í•¨ìˆ˜ Callback 
 *  - jsì˜ í•¨ìˆ˜ëŠ” ì¼ê¸‰ê°ì²´(ê°’)ìœ¼ë¡œì¨ ë§¤ê°œì¸ìë¡œ ì „ë‹¬í•  ìˆ˜ ìˆê³ , ì´ë¥¼ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
 */

const a = (f) => {
    f()
};

const b = () => console.log('ğŸ³ğŸ³ğŸ³');

a(b);

/**
 * 5. ìˆœìˆ˜/ë¹„ìˆœìˆ˜ í•¨ìˆ˜
 *  - ëª¨ë“  í•¨ìˆ˜ì—ëŠ” ì…ë ¥/ì¶œë ¥ì´ ìˆë‹¤.
 *  - í•¨ìˆ˜ì—ëŠ” ë¶€ì…ë ¥/ë¶€ì¶œë ¥ì´ ìˆì„ ìˆ˜ ìˆë‹¤. (ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•œ ë§¤ê°œì¸ì/ ë¦¬í„´ê°’ì™¸ì— ì™¸ë¶€ìŠ¤ì½”í”„ì˜ ê°’ì„ ì••ë ¥/ì¶œë ¥ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.)
 * 
 *  - ìˆœìˆ˜í•¨ìˆ˜ : ì™¸ë¶€ìƒíƒœì— ì˜ì¡´/ë³€ê²½í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ 
 *  - ë¹„ìˆœìˆ˜í•¨ìˆ˜ : ì™¸ë¶€ìƒíƒœì— ì˜ì¡´/ë³€ê²½í•˜ëŠ” í•¨ìˆ˜
 * 
 * - ë˜ë„ë¡ ìˆœìˆ˜í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ë©´ ì¢‹ë‹¤.
 * - ìˆœìˆ˜í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ë¶ˆë³€ì„±ì„ ì¶”ê°€í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹ì´ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì´ë‹¤.
 */
const pureFunc = (n) => {;  
    return ++n;  
};
console.log(pureFunc(1)); //ê²°ê³¼ëŠ” ê°™ìŒ

let count = 0;
const inpureFunc = (n) => {
    count = count + 1; // ì“°ê¸° ì‘ì—…í•˜ëŠ” í•˜ë‚˜ê°€ ë” ìƒê¸´ ê²ƒì„ ë¶€ì¶œë ¥ì´ë¼ê³  í•¨ 
    return ++n + count; //ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•œ ë§¤ê°œì¸ì ì™¸ì— ë‹¤ë¥¸ê°’ì„ ê°€ì ¸ì™€ ì‚¬ìš©í•  ìˆ˜ìˆë‹¤.
};

console.log(inpureFunc(1));

/**
 * 6. Closures í•¨ìˆ˜
 */


//5-29
/**
 * ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í•¨ìˆ˜ëŠ” ì¼ê¸‰ê°ì²´ì´ë‹¤. 
 * 1. ë³€ìˆ˜ì— ëŒ€ì…ê°€ëŠ¥í•´ì•¼ í•œë‹¤. 
 * 2. í•¨ìˆ˜í˜¸ì¶œ ì‹œ ì „ë‹¬ì´ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.
 * 3. í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤.
 * 
 * í•¨ìˆ˜í˜•í”„ë¡œê·¸ë˜ë°ì—ì„œëŠ” ì´ í•¨ìˆ˜ëŠ” ì¼ê¸‰ê°ì²´ë¡œ ë‹¤ë£¨ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.
 * (ìë°”ëŠ” ëŒë‹¤ë¥¼ í†µí•´ì„œ ìš°íšŒì ìœ¼ë¡œ ìœ„ì˜ ì¡°ê±´ë“¤ì„ ë§Œì¡±í•˜ê³  ìˆë‹¤. )
 */

// 1, ê°’ìœ¼ë¡œì¨ ë³€ìˆ˜ì— ëŒ€ì… ê°€ëŠ¥í•˜ë‹¤.
const func = function(){
    console.log('ğŸš—ğŸš—ğŸš—');
}
func(); // func ë¼ëŠ” ê°ì²´ 

const fun2 = func; // func2 ë¼ëŠ” ê³µê°„ì— ê°¹ì²´ì— ëŒ€í•œ ì°¸ì¡°ì£¼ì†Œë¥¼ ë‹´ì€ ê²ƒì„ 0x123

fun2();

console.log(func == fun2);// true

// 2. ê°’ìœ¼ë¡œì¨ ë§¤ê°œì¸ìë¡œ ì‚¬ìš© 

const runner = (f, count) => {
    for (let i = 0; i < count; i ++)
    f();
};

runner(func, 5);

// 3. ê°’ìœ¼ë¡œì¨ ë¦¬í„´ê°’ìœ¼ë¡œ ì‚¬ìš© 

const carFactoryBuilder = () => {
    return () => console.log('ğŸš•ğŸš•ğŸš•');
};
// const carFactory = carFactoryBuilder; //í•¨ìˆ˜ìì²´ë¥¼ ì¤€ ê²ƒ 
const carFactory = carFactoryBuilder(); // í˜¸ì¶œ ê²°ê³¼ë¥¼ ì¤€ ê²ƒ , ì €ë§Œí¼ì´ ê·¸ëƒ¥ 1 2 3 ì²˜ëŸ¼ ìƒê°í•´ì•¼ í•œë‹¤. 
console.log(carFactory);
carFactory();

// ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” í•¨ìˆ˜ 
const func2 = (n) => console.log('ğŸ¥€' + n);

const runner2 = (f) => {
    for(let i = 0; i <3; i++ )
    f(i + 1); //í˜¸ì¶œë¶€ì—ì„œ ê°’ì„ ì „ë‹¬í•´ ì£¼ì–´ì•¼ í•œë‹¤.
};
runner2(func2);

// ì–´ë–¤ì°¨ë¥¼ ëª‡ëŒ€ ìƒì‚°í• ê±´ì§€ ë§¤ê°œë³€ìˆ˜ë¡œ ì •í•´ì¤€ë‹¤.
const carFactoryBuilder2 = (car) => {
    return (n) => {
        for (i = 0; i <n; i++)
        console.log(car);
    }
};
const firecarFactory2 = carFactoryBuilder2('ğŸš’ğŸš’ğŸš’');  
firecarFactory2(3);

// ê²½ì°°ì°¨ factoryë¥¼ ì§€ì–´ì„œ (í•¨ìˆ˜) 10 ëŒ€ ì¶œë ¥í•˜ì„¸ìš”

const policeFactory = carFactoryBuilder2('ğŸš“')
policeFactory(10);

/**
 * 6. Closuer í•¨ìˆ˜
 * - ììœ ë³€ìˆ˜ free variable : í•¨ìˆ˜ ì§€ì—­ë²”ìœ„ì—ì„œ ì„ ì–¸ë˜ì§€ ì•Šì€ ë³€ìˆ˜
 * - ëª¨ë“  ììœ ë³€ìˆ˜ê°€ ì „ì—­ë³€ìˆ˜ì¸ ê²ƒì€ ì•„ë‹ˆë‹¤.
 * 
 * í´ë¡œì €í•¨ìˆ˜ë€? ììœ ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ì™¸ë¶€ë¡œë¶€í„° ë‹«íŒ í•¨ìˆ˜ 
 *  - í´ë¡œì ¸ê°€ ê°€ì§„ ììœ ë³€ìˆ˜ëŠ” ì™¸ë¶€ë¡œë¶€í„° ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ê³  ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. 
 */

const word = 'ì•ˆë…•';
const greeting = (name) => {
    const word2 = 'ë°˜ê°€ì›Œ';
    console.log(`${word}, ${name}. ${word2}`);
};

greeting('ê¸¸ë™');



function yoo(){
    const num = 100;
    return () => console.log(`num = ${num}`); //${num}, num = 100 ììœ ë³€ìˆ˜ í¬í•¨í•œ ìƒã…‡íƒœë¡œ ë°˜í™˜ë˜ê²Œ ëœë‹¤.
}

const num = 200;
const too = yoo(); // closureí•¨ìˆ˜ (ììœ ë³€ìˆ˜ num(100)) ì„ ê°€ì§€ê³  ì™¸ë¶€ë¡œë¶€í„° ë‹«íŒ í•¨ìˆ˜
// const too = () => console. log ( `num = ${num});
console.log(too);
too(); // 100

let cnt = 0;
const globalCounter = () => console.log(++cnt);
globalCounter();
globalCounter();
globalCounter();
cnt = 100;
globalCounter();
globalCounter();
globalCounter();
globalCounter(); // ì´ë ‡ê²Œ ì›ì¹˜ì•Šê²Œ ë  ìˆ˜ ìˆë‹¤

const closuereCounterMaker = () => {
    let cnt = 0;
    return () => console.log(++cnt); // cnt ê°€ ì°¸ì¡°í•˜ê³  ìˆëŠ” ììœ ë²¼ìˆ˜ê¹Œì§€ ê°€ì§€ê³  ë°˜í™˜ì´ ë¨ã„´
};

const closuereCounter = closuereCounterMaker();
closuereCounter();
closuereCounter();
closuereCounter();
// ììœ ë³€ìˆ˜ cntëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.